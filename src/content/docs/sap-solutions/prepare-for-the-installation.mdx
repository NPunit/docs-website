---
title: "Prepare for the installation"
metaDescription: "How to install the SAP and alert ecosystems with New Relic"
freshnessValidatedDate: never
---

## Prerequisites

Before you can start, you'll need to sign up for a New Relic account. For New Relic Monitoring for SAP Solutions to function correctly, ensure the following are met:

    - A New Relic [account ID](/docs/accounts/accounts-billing/account-setup/account-id).
    - A New Relic <InlinePopover type="licenseKey"/>.
    - Region: [Choose your data center (US or EU)](/docs/accounts/accounts-billing/account-setup/choose-your-data-center/)
    - SAP Systems with the required software component release level, as specified by New Relic Monitoring for SAP Solutions.
    - Connectivity between the Central Monitoring System and the New Relic cloud.
    - Connectivity between the Central Monitoring System and the monitored systems/databases.
      
    <Callout variant="important">
        Approval and/or configuration assistance from your security or network teams may be required to meet these prerequisites. Ensure these steps are completed before starting the installation and filling out the [Checklist for installation readiness](/docs/sap-solutions/prepare-for-the-installation/#checklist-for-installation-readiness) to confirm all environments are correctly set up.
    </Callout>

<CollapserGroup>
  <Collapser
    id="pre-installation-questionnaire"
    title="Pre-installation questionnaire"
  >
    - Do you already have a New Relic Account for SAP systems monitoring?
      - If yes, which New Relic data center is it connected to (US or EU)?
      - If not, create a new account connected to one of the data centers.
    - List of SAP Systems to be Monitored
      - For each monitored system, provide the following:
        - System ID and clients
        - Database vendor and version
        - SAP Release and Patch Level of the following software components:
          - SAP_BASIS
          - Kernel
    - Specify one SAP system to be used as the Central System where NRM4SAP will be installed:
      - System ID and client where the ABAP component and configuration will be installed.
      - Host name and port of the Proxy Server (if used), including any relevant proxy server policies for access to the New Relic One platform.

<table style="border: 1px solid white; border-collapse: collapse;">
    <thead>
        <tr>
            <th style="width: 200px; border: 1px solid white;">
                <strong>System ID</strong>
            </th>
            <th style="border: 1px solid white;">
                <strong>Client</strong>
            </th>
            <th style="border: 1px solid white;">
                <strong>Database Vendor and Version</strong>
            </th>
            <th style="border: 1px solid white;">
                <strong>SAP_BASIS Version</strong>
            </th>
            <th style="border: 1px solid white;">
                <strong>Central System</strong>
            </th>
        </tr>
    </thead>
</table>

**Monitored Systems**:

<table>
    <thead>
        <tr>
            <th style={{ width: "200px" }}>
            **System ID**
            </th>
            <th>
            **Client**
            </th>
            <th>
            **Database Vendor and Version**
            </th>
            <th>
            **SAP_BASIS Version**
            </th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>
            System 1
            </td>
            <td>
            </td>
            <td>
            </td>
            <td>
            </td>
        </tr>
        <tr>
            <td>
            System 2
            </td>
            <td>
            </td>
            <td>
            </td>
            <td>
            </td>
        </tr>
        <tr>
            <td>
            System 3
            </td>
            <td>
            </td>
            <td>
            </td>
            <td>
            </td>
        </tr>
    </tbody>
</table>

**Optional**: Proxy Hostname and Port
  </Collapser>

  <Collapser
    id="checklist-for-installation-readiness"
    title="Checklist for installation readiness"
  >
    - New Relic Account Info
      - NR Account ID
      - License/Ingestion Key
      - Region
      - Login Credential

<table style="border: 1px solid white; border-collapse: collapse;">
    <thead>
        <tr>
            <th style="width: 200px; border: 1px solid white;">
                <strong>NR Account ID</strong>
            </th>
            <th style="border: 1px solid white;">
                <strong>License/Ingestion Key</strong>
            </th>
            <th style="border: 1px solid white;">
                <strong>Region</strong>
            </th>
            <th style="border: 1px solid white;">
                <strong>Login Credential</strong>
            </th>
        </tr>
    </thead>
</table>

    - Monitored Systems Info
      - System ID (SID)
      - Client
      - Domain name/IP
      - RFC User Name
      - RFC User Credential

<table style="border: 1px solid white; border-collapse: collapse;">
    <thead>
        <tr>
            <th style="width: 200px; border: 1px solid white;">
                <strong>System ID</strong>
            </th>
            <th style="border: 1px solid white;">
                <strong>Client</strong>
            </th>
            <th style="border: 1px solid white;">
                <strong>Domain Name/IP</strong>
            </th>
            <th style="border: 1px solid white;">
                <strong>RFC User Name</strong>
            </th>
            <th style="border: 1px solid white;">
                <strong>RFC User Credential</strong>
            </th>
        </tr>
    </thead>
</table>

    - HANA DB Monitoring Info
      - System ID (SID)
      - Host Domain/IP
      - Tenant Port
      - DB User Name
      - Accessible from Central Server Tested

<table style="border: 1px solid white; border-collapse: collapse;">
    <thead>
        <tr>
            <th style="width: 200px; border: 1px solid white;">
                <strong>System ID</strong>
            </th>
            <th style="border: 1px solid white;">
                <strong>Host Domain/IP</strong>
            </th>
            <th style="border: 1px solid white;">
                <strong>Tenant Port</strong>
            </th>
            <th style="border: 1px solid white;">
                <strong>DB User Name</strong>
            </th>
            <th style="border: 1px solid white;">
                <strong>Accessible from Central Server Tested</strong>
            </th>
        </tr>
    </thead>
</table>
  </Collapser>

  <Collapser
    id="network-accessibility"
    title="Network Accessibility"
  >
    - Ensure the firewall is not blocking HTTPs traffic to New Relic.
    - Proxy Server Required (if applicable):
      - Proxy Server Domain
      - Proxy Port
      - Authentication Required
      - Proxy Username
      - Proxy User Password

<table style="border: 1px solid white; border-collapse: collapse;">
    <thead>
        <tr>
            <th style="width: 200px; border: 1px solid white;">
                <strong>NR Account IProxy Server Domain</strong>
            </th>
            <th style="border: 1px solid white;">
                <strong>Proxy Port</strong>
            </th>
            <th style="border: 1px solid white;">
                <strong>Authentication Required</strong>
            </th>
            <th style="border: 1px solid white;">
                <strong>Proxy Username</strong>
            </th>
            <th style="border: 1px solid white;">
                <strong>Proxy User Password</strong>
            </th>
        </tr>
    </thead>
</table>
  </Collapser>

  <Collapser
    id="api-endpoints"
    title="API Endpoints"
  >
    ### US Region

    <table>
    <thead>
        <tr>
            <th style={{ width: "200px" }}>
            **RFC Destination**
            </th>
            <th>
            **Conn. Type**
            </th>
            <th>
            **Target Host**
            </th>
            <th>
            **Service No.**
            </th>
            <th>
            **Path Prefix**
            </th>
            <th>
            **Description**
            </th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>
            NR_API_EVENT
            </td>
            <td>
            G
            </td>
            <td>
            insights-collector.newrelic.com
            </td>
            <td>
            443
            </td>
            <td>
            /v1/accounts/events
            </td>
            <td>
            Event API Endpoint
            </td>
        </tr>
        <tr>
            <td>
            NR_API_LOG
            </td>
            <td>
            G
            </td>
            <td>
            log-api.newrelic.com
            </td>
            <td>
            443
            </td>
            <td>
            /log/v1
            </td>
            <td>
            Log API Endpoint
            </td>
        </tr>
        <tr>
            <td>
            NR_API_METRIC
            </td>
            <td>
            G
            </td>
            <td>
            metric-api.newrelic.com
            </td>
            <td>
            443
            </td>
            <td>
            /metric/v1
            </td>
            <td>
            Metric API Endpoint
            </td>
        </tr>
        <tr>
            <td>
            NR_API_TRACE
            </td>
            <td>
            G
            </td>
            <td>
            trace-api.newrelic.com
            </td>
            <td>
            443
            </td>
            <td>
            /trace/v1
            </td>
            <td>
            Trace API Endpoint
            </td>
        </tr>
    </tbody>
</table>

### EU Region

<table>
    <thead>
        <tr>
            <th style={{ width: "200px" }}>
            **RFC Destination**
            </th>
            <th>
            **Conn. Type**
            </th>
            <th>
            **Target Host**
            </th>
            <th>
            **Service No.**
            </th>
            <th>
            **Path Prefix**
            </th>
            <th>
            **Description**
            </th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>
            NR_API_EVENT_EU
            </td>
            <td>
            G
            </td>
            <td>
            insights-collector.eu01.nr-data.net
            </td>
            <td>
            443
            </td>
            <td>
            /v1/accounts/events
            </td>
            <td>
            Event API Endpoint
            </td>
        </tr>
        <tr>
            <td>
            NR_API_LOG_EU
            </td>
            <td>
            G
            </td>
            <td>
            log-api.eu.newrelic.com
            </td>
            <td>
            443
            </td>
            <td>
            /log/v1
            </td>
            <td>
            Log API Endpoint
            </td>
        </tr>
        <tr>
            <td>
            NR_API_METRIC
            </td>
            <td>
            G
            </td>
            <td>
            metric-api.eu.newrelic.com
            </td>
            <td>
            443
            </td>
            <td>
            /metric/v1
            </td>
            <td>
            Metric API Endpoint
            </td>
        </tr>
        <tr>
            <td>
            NR_API_TRACE
            </td>
            <td>
            G
            </td>
            <td>
            trace-api.eu.newrelic.com
            </td>
            <td>
            443
            </td>
            <td>
            /trace/v1
            </td>
            <td>
            Trace API Endpoint
            </td>
        </tr>
    </tbody>
</table>
  </Collapser>

</CollapserGroup>

## Download software

Installation package is available upon request. Please ask your New Relic Account Executive for the link to download the software.

The downloaded package should contain the following files. The final list of files are listed in **Packing_List.txt**

  <table>
    <thead>
      <tr>
      <th style={{ width: '200px' }}>
        File Title
      </th>
      <th>
        File Name
      </th>
      <th>
        Remarks
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        Packing List
      </td>
      <td>
        `NRM4SAP<version>.txt`
      </td>
      <td>
        File inventory list
      </td>
    </tr>
    <tr>
      <td>
        ABAP Add-on
      </td>
      <td>
        `K-xxxAOIINNEWR.SAR`
      </td>
      <td>
        Archive file for SAP Add-on
      </td>
    </tr>
    <tr>
      <td>
      ABAP Add-on Upgrade Pkg
      </td>
      <td>
        `K-xxxAOUINNEWR.SAP`
      </td>
      <td>
      Archive file for SAP Add-on Upgrade
      </td>
    </tr>
    <tr>
      <td>
      Authorization Roles
      </td>
      <td>
        `_NEWR_DATA_PROVIDER.SAP`
      </td>
      <td>
      Authorization Role for NR RFC users
      </td>
    </tr>
  </tbody>
</table>

  <Callout variant="tip">
    The downloaded file is in a zip format, we recommend you to Unzip it to expose the above files.
  </Callout>

## Monitored systems [#monitored-systems]

Our agentless architecture allows for the monitoring of SAP systems without the need to install any agents on these systems. The telemetry data is retrieved via RFC connections. To ensure secure and stable connections, SAP system users must be created with specific authorization profiles for these RFC connections.

<Steps>

  <Step>
  Ensure the following SAP components have compatible versions:

  <table>
    <thead>
      <tr>
        <th style={{ width: '200px' }}>
        SAP Component
        </th>
        <th>
        Compatible Version
        </th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>
        SAP_BASIS
        </td>
        <td>
        Release 740 and above
        </td>
      </tr>
      <tr>
        <td>
        Kernel
        </td>
        <td>
        Release 753 Patch 602 and above
        </td>
      </tr>
      <tr>
        <td>
        ST-PI
        </td>
        <td>
        Release 740 SP 14 and above
        </td>
      </tr>
    </tbody>
  </table>

  </Step>

  <Step>
  Upload Authorization Role [`NEWR_DATA_PROVIDER`](/docs/sap-solutions/prepare-for-the-installation/#authorization-objects-used-in-role).

  <Callout variant="important">
    See [Upload Authorization Role](/docs/sap-solutions/prepare-for-the-installation/#upload-authorization-role) to know how to upload the authorization role.
  </Callout>

  </Step>

  <Step>
  Create a system type ID with the uploaded role for RFC connection. See [Create New Relic RFC User ID].
  </Step>

  <Step>
  If the monitored database is <DNT>**HANA**</DNT>.
    - Create SQL Access to be used for monitoring:
      - Create a <DNT>**HANA**</DNT> database user **NRAGENT** with <DNT>**Catalog Read**</DNT> and <DNT>**Monitoring access**</DNT>.

    ```sql
      CREATE ROLE NR_AGENT_ROLE;
      GRANT CATALOG READ TO NR_AGENT_ROLE;
      GRANT MONITORING TO NR_AGENT_ROLE;
    ```

    ```sql
      CREATE USER NRAGENT PASSWORD 'Xxxxxxxx' NO FORCE_FIRST_PASSWORD_CHANGE;
      GRANT NR_AGENT_ROLE TO NRAGENT;
    ```
    
      - Collect the <DNT>**HANA server host**</DNT> and <DNT>*tenant DB port*</DNT> for SQL connection.
  </Step>

  <Step>
  For monitored databases other than **Hana database**:
    - Use the standard **CCMS Database KPI** to monitor database performance. This may need to be activated by running the **ABAP** program **RSDBKPIMON**.
    - Use the monitored system ID (e.g., SQ2) as the parameter. Once finished, you should receive the message **Finished creating the nodes** on the status bar.
  </Step>

  </Steps>

<CollapserGroup>
  <Collapser
    id="upload-authorization-role"
    title="Upload Authorization Role"
  >
    1. Use **SAP Transaction PFCG** and go to **Role** > **Upload** to upload the file **_NEWR_DATA_PROVIDER.SAP** from the installation package.
    2. When prompted, confirm that the role `/NEWR/DATA_PROVIDER` should be loaded.
      <img
          title="Authorization Role"
          alt="A screenshot displaying the authorization role upload"
          src="/images/authorisation-role.webp"
          width="500"
          />
    3. After it's loaded, select the change icon.
    4. Go to the Authorizations tab and select Change Authorization Data.
    5. Select the Activate button to activate the profile.
    6. If SAP suggests a profile name, select the green check icon to proceed.
    7. Ensure the message appears on the status bar.
  </Collapser>
  
  <Collapser
    id="authorization-objects-used-in-role"
    title="Authorization objects used in role `/NEWR/DATA_PROVIDER`"
  >
    The following authorization objects are configured with display-only authorization:

      - S_BGRFC
      - S_RFC
      - S_RFC_ADM
      - S_TCODE
      - /SDF/E2E
      - S_ADMI_FCD
      - S_BTCH_ADM
      - S_DBCON
      - S_SRT_ELOG
      - S_SRT_MONI
      - S_TABU_DIS
      - S_TABU_NAM
      - S_TOOLS_EX
      - S_XMB_MONI
      - S_APPL_LOG
  </Collapser>

</CollapserGroup>

## Central monitoring system [#central-monitoring-system]

The central monitoring system is where the New Relic monitoring for SAP solutions is installed. The telemetry data is collected, transformed, and transmitted to the New Relic One platform for analysis and visualization.

    1. On the Central monitoring system, ensure the following component versions are installed.

      <CollapserGroup>
        <Collapser
          id="sap-versions"
          title="SAP component versions"
        >
      
      <table>
        <thead>
          <tr>
            <th style={{ width: "200px" }}>
                SAP_BASIS Version
              </th>
              <th>
                SAP_ABA Version
              </th>
              <th>
                ST-PI Version
              </th>
            </tr>
        </thead>
          <tbody>
            <tr>
              <td>
              740
              </td>
              <td>
              n/a
              </td>
              <td>
              </td>
            </tr>
            <tr>
              <td>
              750
              </td>
              <td>
              750
              </td>
              <td>
              </td>
            </tr>
            <tr>
              <td>
              750
              </td>
              <td>
              75A
              </td>
              <td>
              </td>
            </tr>
            <tr>
              <td>
              751
              </td>
              <td>
              75B
              </td>
              <td>
              </td>
            </tr>
            <tr>
              <td>
              752
              </td>
              <td>
              75C
              </td>
              <td>
              </td>
            </tr>
            <tr>
              <td>
              753
              </td>
              <td>
              75D
              </td>
              <td>
              740 SP14+
              </td>
            </tr>
            <tr>
              <td>
              754
              </td>
              <td>
              75E
              </td>
              <td>
              </td>
            </tr>
            <tr>
              <td>
              755
              </td>
              <td>
              75F
              </td>
              <td>
              </td>
            </tr>
            <tr>
              <td>
              756
              </td>
              <td>
              75G
              </td>
              <td>
              </td>
            </tr>
            <tr>
              <td>
              757
              </td>
              <td>
              75H
              </td>
              <td>
              </td>
            </tr>
            <tr>
              <td>
              758
              </td>
              <td>
              75I
              </td>
              <td>
              </td>
            </tr>
          </tbody>
        </table>
        </Collapser>
      </CollapserGroup>
      If your SAP version is not listed above, please contact your New Relic account executive. They will provide a supplementary package tailored for your version.

    2. Ensure the Central Monitoring System is configured with:
        - At least 20 Dialog Work Processes.
        - At least 10 Background Work Processes.
    3. Ensure outbound HTTPS access to the New Relic data center is allowed from the central monitoring server.
        - For more details regarding connection to the US and EU data center, keep reading below table:

      <table>
        <thead>
          <tr>
            <th style={{ width: '200px' }}>
              Connection
            </th>
            <th>
              US data center
            </th>
            <th>
              EU data center endpoint
            </th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>
            Metrics
            </td>
            <td>
            https://metric-api.newrelic.com/metric/v1
            </td>
            <td>
            https://metric-api.eu.newrelic.com/metric/v1
            </td>
          </tr>
          <tr>
            <td>
            Events
            </td>
            <td>
            https://insights-collector.newrelic.com/v1/accounts/events
            </td>
            <td>
            https://insights-collector.eu01.nr-data.net/accounts/event/v1
            </td>
          </tr>
          <tr>
            <td>
            Logs
            </td>
            <td>
            https://log-api.newrelic.com/log/v1
            </td>
            <td>
            https://log-api.eu.newrelic.com/log/v1
            </td>
          </tr>
          <tr>
            <td>
            Traces
            </td>
            <td>
            https://trace-api.newrelic.com/trace/v1
            </td>
            <td>
            https://trace-api.eu.newrelic.com/trace/v1
            </td>
          </tr>
        </tbody>
        </table>
        - If a proxy server is required, ensure the proxy policy conditions are adjusted accordingly for accessing New Relic.
        - Make note of the following proxy settings:
          - Server domain name/IP address and port.
          - Proxy access credentials (if authentication is required).
        - If HTTPS traffic to New Relic is blocked by a firewall, adjust the firewall policy to allow it.

  <Callout variant="tip">
    The above connections can be set in the **Central Monitoring System** using **SAP Transaction SM59** and tested. For detailed instructions, see **Set HTTP Destination to New Relic Cloud**.
  </Callout>
    4. For each monitored system specified, create a **RFC Destination**. Use Transaction `SM59` and the remote system ID to create and test the connections. For detailed instructions, see C**reate RFC Destinations for Monitored Systems**.
    5. Ensure the following for monitoring remote HANA databases:
          - The Central Monitoring System should have access to the HANA Server and the Tenant DB port.
          - If your Central Monitoring System is not an S4HANA system, ensure one of the following components is installed:
            - HANA Client v2.0 (version needs to be compatible with the HANA DB)
            - HANA Client Lib file:
                - libSQLDBCHDB.so (Linux)
                - libSQLDBCHDB.dll (Windows)
                - The library should be located in the SAP Kernel folder and owned by the SID Admin ID (e.g., sd1adm).
          - For each remote HANA database, use Transaction **SAP DBACOCKPIT** to create a DB Connection. See the **Create DB Connection** section for detailed instructions.