---
title: "Configure New Relic ABAP add-on package"
metaDescription: "Configure New Relic ABAP add-on package."
freshnessValidatedDate: never
---

## Menu /NEWR/INSTALL [#menu-newr-install]

After  successfully installing the add-on on the Central Monitoring System, follow these steps to configure the data providers:

    1. Ensure the installer has the proper authorization to perform the configuration. 
    2. The new transaction code introduced by the add-on package is listed in **Transaction Code for NRM4SAP installation and configuration**. 
    3. We recommend the installer adds the parameter `/NEWR/*` to the Tcode authorization object(s) in their profile/role.
  <Callout variant="tip">
    If this is your first time installing the New Relic ABAP Add-on, complete all the steps described below. If you are upgrading from a previous version, refer to the **Upgrade from Previous Version** section to determine which steps are necessary.
  </Callout> 
    4. Login to the production client of the Central Monitoring System.
    5. Begin the data provider setup by starting the area **menu /NEWR/INSTALL**.
  <Callout variant="tip">
    Navigate to **SAP Easy Access root menu** before starting the area menu by typing `/n/NEWR/INSTALL` in the command field. If you are unsure whether you are at the **SAP Easy Access root menu**, type in `/n` and press **Enter**.
  </Callout>

## Connect systems and generate data provider configurations [#connect-systems]

<Steps>

  <Step>
    ## Click the **Install New Release and Patch** folder [# install-new-release-and-patch]

    <Callout variant="important">
    Follow the steps to complete the configuration if not yet completed before installation
    </Callout>

    - Setup HTTP and RFC Destinations
        - This option invokes SAP transaction SM59.
        - It verifies that the RFC connections to Monitored Systems and HTTP connections to New Relic Endpoints are set up correctly.
        - See [Create RFC destinations for monitored systems](/docs/sap-solutions/configure-new-relic-abap-add-on-package/#create-rfc-destinations-for-monitored-systems) and Set HTTP Destination to New Relic Cloud.

<CollapserGroup>
  <Collapser
    id="create-rfc-destinations-for-monitored-systems"
    title="Create RFC destinations for each monitored systems"
  >
    1. In the SAP GUI, enter the transaction code **SM59** and press **Enter**.
    2. Click **Create** to set up a new RFC destination.
    3. Enter the following RFC destination information:
        - **RFC Destination**: Enter the destination name. We recommend to name the RFC destination as `NR_<SYSID>CLNT<CLNT#>`. For example, `NR_SAPSYSCLNT100`.
        - **Connection Type**: Select **3** (ABAP Connection).
        - **Description**: Provide a brief description of the RFC destination.
        - **Target Host**: Enter the fully qualified domain name (FQDN) or IP address of the monitored system.
        - **Save as**: Choose either Host or IP based on your entry for the Target Host.
      <img
          title="Create RFC destinations for monitored systems"
          alt="A screenshot displaying the how to create RFC destinations for monitored systems"
          src="/images/rfc-destination-1.webp"
          />
    4. Click the **Technical Settings** tab and enter the below options:
        - **Target Host**: Enter the hostname or IP address of the monitored system.
        - **Instance No.**: Enter the instance number of the monitored system.
        - *Gateway Host and Service*: Specify the Gateway Host and Service if necessary.

    5. Click on the **Logon & Security** tab.
        - **User**: Enter the user created for this ABAP connection, which is NR4SAPDP.
        - **Password**: Enter the password for the NR4SAPDP user.
    6. Once enterng all the required information, save the RFC destination.
    7. Test the connection and authorization to ensure that the RFC destination is functioning correctly:
        - **Connection Test**: Select **Utility > Test > Connection Test**.
        - **Authorization Test**: Select **Utility > Test > Authorization Test**.
      <Callout variant="important">
        Ensure that the test results are successful.
      </Callout>
    
  </Collapser>
</CollapserGroup>

  - Setup Connection to Remote Database
      - This option invokes SAP Transaction **DBACOCKPIT**.
      - It verifies that connections to remote HANA DBs are set up correctly.
      - See **Create Database Connection** for detailed instructions.
      - Create one DB Connection for each remote **HANA** database you want to monitor.

  <img
      title="Configure New Relic"
      alt="A screenshot displaying the SAP install new release and patch"
      src="/images/configure-newrelic.webp"
  />

  </Step>

  <Step>
    ## Configure Connections to NR API Endpoints [#configure-connections]
      1. Select this option to complete the connection to NR API endpoints.
      2. Specify the **New Relic Account ID** (optional to prefix it with SAP-).
      3. Use the HTTP connection created in previous steps for **Metric**, **Event**, **Log**, and **Trace** endpoints.
      <Callout variant="tip">
      Enter them separately along with the API Ingest Key.
      </Callout>
      4. Multiple accounts can be configured here.
  </Step>

  <Step>
    ## Copy Template Tables from Client 000 [#copy-template-tables]
      1. Install the add-on software in **client 000**.
      2. Execute this option to copy the table from client 000. 
      3. Click the <img src="/images/new-relic-sap-clock.webp" class="inline" style={{height: "30px", width: "30px"}} alt="clock indicator in New Relic" title="Multiple apps name indicator in New Relic" /> icon.
      4. Confirm the successful copy with the success message.
  </Step>

  <Step>
    ## Define the Monitored Systems [#define-monitored-systems]
      1. Use this option to define the monitored systems.
      2. Click New Entries to get to the next data entry screen and enter the following details:
          - SAP System ID
          - Client
          - RFC Destination
          - Software Version
          - Database Vendor
          - Database Connection (Currently only supports HANA database)

      {/* <img
      title="Image to be Added"
      alt="A screenshot displaying the SAP Data Provider Intalling Information"
      src=""
      /> */}
      3. Click the **Monitoring Group** option on the next screen.
      4. Select the required monitoring groups for this system, then click <img src="/images/generate.webp" class="inline" style={{height: "30px", width: "30px"}} alt="generate icon in New Relic" title="Multiple apps name indicator in New Relic" /> when completed.

    <CollapserGroup>
      <Collapser
          id="sap-versions"
          title="SAP component versions"
        >
      
      <table>
        <thead>
          <tr>
            <th style={{ width: "200px" }}>
                Monitor Group
              </th>
              <th>
                Included Data Providers
              </th>
              <th>
                Applied to the System Type
              </th>
              <th>
                Special Notes
              </th>
            </tr>
        </thead>
          <tbody>
            <tr>
              <td>
              BIZ_DOC
              </td>
              <td>
              Change document event for business objects
              </td>
              <td>
              ECC systems and S/4 HANA
              </td>
              <td>
              </td>
            </tr>
            <tr>
              <td>
              DB_KPI
              </td>
              <td>
              Key Performance Indicators for databases, such as availability, space, etc.
              </td>
              <td>
              All Systems, except HANA Database
              </td>
              <td>
              </td>
            </tr>
            <tr>
              <td>
              HANA_DB
              </td>
              <td>
              HANA Database data providers connect directly to the HANA DB
              </td>
              <td>
              All HANA databases
              </td>
              <td>
              Requires Database Connection
              </td>
            </tr>
            <tr>
              <td>
              HOST
              </td>
              <td>
              Host metrics such as CPU, Memory, Disk Usage
              </td>
              <td>
              All ABAP Systems
              </td>
              <td>
              </td>
            </tr>
            <tr>
              <td>
              IDOC
              </td>
              <td>
              IDOC events
              </td>
              <td>
              ECC systems and S/4 HANA
              </td>
              <td>
              </td>
            </tr>
            <tr>
              <td>
              INTERFACE
              </td>
              <td>
              IDOC, cXML/Web Service events, and metrics
              </td>
              <td>
              ECC systems and S/4 HANA
              </td>
              <td>
              </td>
            </tr>
            <tr>
              <td>
              MAXDB
              </td>
              <td>
              Metrics for MAXDB database
              </td>
              <td>
              Systems with MAXDB
              </td>
              <td>
              </td>
            </tr>
            <tr>
              <td>
              MS_SQL
              </td>
              <td>
              Metrics for Microsoft SQL Server database
              </td>
              <td>
              Systems with Microsoft SQL Server
              </td>
              <td>
              </td>
            </tr>
            <tr>
              <td>
              Oracle
              </td>
              <td>
              Metrics for Oracle Database
              </td>
              <td>
              Systems with Oracle Database
              </td>
              <td>
              </td>
            </tr>
            <tr>
              <td>
              SAP_APPL
              </td>
              <td>
              Events, Logs, Metrics, and Traces for SAP Application Monitoring such as RFCs, Jobs, Transactions, etc.
              </td>
              <td>
              All ABAP Systems
              </td>
              <td>
              </td>
            </tr>
            <tr>
              <td>
              SAP_SYSTEM
              </td>
              <td>
              Metrics for SAP System and application server instances, monitoring such as User, System Performances, etc.
              </td>
              <td>
              All ABAP Systems
              </td>
              <td>
              </td>
            </tr>
            <tr>
              <td>
              CUSTOM
              </td>
              <td>
              Any data provider added by the customer
              </td>
              <td>
              </td>
              <td>
              </td>
            </tr>
            </tbody>
        </table>
        </Collapser>
      </CollapserGroup>

    <Callout variant="tip">
      Maintain the list of Monitoring Groups by navigating to **Expert Mode > Installation Setups > Monitoring Group Maintenance**.
      </Callout>
      5. Once entries are saved, click **BACK** or the **F3** key to go to the next step.
  </Step>

  <Step>
    ## Check RFC Destinations [#check-rfc-destinations]
      1. Use this menu option to test the RFC destinations for each of the Monitored Systems and NR API endpoints.
      2. Note that RFC destinations ‘NONE’ are not tested.
  </Step>

  <Step>
    ## Generate Configurations for New Data Providers [#generate-configurations]
      1. Use this menu option to generate all the new data providers related to the new release/patch.
      2. For a fresh install, all Data Providers (DP) are generated in this step.
      3. When executing this option, confirm the release and patch to be installed on the first screen.
      4. If the installation release and patch number is empty, it means the configuration has already been generated.
      5. If the configuration needs to be re-generated, use the **Re-generate Data Provider Configurations** in the **Maintain Monitored Systems** folder.
      6. Alternatively, use the menu option **Reset Installation Flag (to re-install only)** to reset the installation flag and re-generate the configurations.

      <img
      title="Maintain Monitored Systems"
      alt="A screenshot displaying the SAP maintain monitored systems"
      src="/images/maintain-monitored-systems.webp"
      />
  </Step>

  <Step>
    ## Verify Installation Completeness [#verify-installation-completeness]
      1. Click **Verify Installation Completeness** to ensure everything is OK.
      2. If any item shows a red light, click on the execution button in the **Action Needed** column.
  </Step>

  </Steps>

  ## Configuration Verification
      1. To verify that data providers are correctly configured, select the **Data Provider Registry Maintenance** folder.
      2. Click **Data Provider Registry**, or use transaction `/n/NEWR/REGISTRY`.
      3. Select any **Data Provider Name** and click **Configure** to verify the configuration parameters.
      4. Click the **TestDP** to test the data provider.

      <img
      title="Data Provider Registry"
      alt="A screenshot displaying the SAP data provider registry"
      src="/images/data-provider-registry.webp"
      />